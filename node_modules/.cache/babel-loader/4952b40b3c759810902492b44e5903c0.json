{"ast":null,"code":"import _toConsumableArray from\"/home/kryo/Desktop/ReduxToolkit_TodoApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/kryo/Desktop/ReduxToolkit_TodoApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var synth=window.speechSynthesis;var TextToSpeech=function TextToSpeech(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),pitch=_useState4[0],setPitch=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),rate=_useState6[0],setRate=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),voiceSelect=_useState8[0],setVoiceSelect=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),voiceList=_useState10[0],setVoiceList=_useState10[1];var _useState11=useState(\"Play\"),_useState12=_slicedToArray(_useState11,2),btnText=_useState12[0],setBtnText=_useState12[1];var handleChange=function handleChange(e){var type=e.target.type;var name=e.target.name;var value=e.target.value;if(type===\"textarea\"){setText(value);}else if(name===\"rate\"){setRate(value);}else if(name===\"pitch\"){setPitch(value);}else if(name===\"voice\"){setVoiceSelect(value);}else{console.log(\"handleChange error type = \"+type);}};var handleSubmit=function handleSubmit(event){event.preventDefault();speak();// inputTxt.blur();\n};function getVoices(){var voices=synth.getVoices().sort(function(a,b){var aname=a.name.toUpperCase(),bname=b.name.toUpperCase();if(aname<bname)return-1;else if(aname===bname)return 0;else return+1;});return voices;}function speak(){if(synth.speaking){if(synth.paused){synth.resume();setBtnText(\"Pause\");console.log(\"resume\");}else{synth.pause();setBtnText(\"Resume\");console.log(\"pause\");}}else if(text!==\"\"){var utterThis=new SpeechSynthesisUtterance(text);console.log(utterThis);//onboundary\n//e.charIndex -> vi tri dau tien cua tu dang duoc doc\nutterThis.onend=function(event){setBtnText(\"Play\");console.log(\"SpeechSynthesisUtterance.onend\");};utterThis.onstart=function(event){setBtnText(\"Pause\");console.log(\"SpeechSynthesisUtterance.onend\");};utterThis.onerror=function(event){console.error(\"SpeechSynthesisUtterance.onerror\");};if(voiceSelect>=0)utterThis.voice=voiceList[voiceSelect];utterThis.pitch=pitch;utterThis.rate=rate;synth.speak(utterThis);}}useEffect(function(){var voices=getVoices();setVoiceList(_toConsumableArray(voices));},[]);useEffect(function(){if(speechSynthesis.onvoiceschanged!==undefined){speechSynthesis.onvoiceschanged=voiceSelect;}},[voiceSelect]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Speech synthesiser\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter some text in the input below and press return or the \\\"play\\\" button to hear it. change voices using the dropdown menu.\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"inputForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"txt\",value:text,onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rate\",children:\"Rate\"}),/*#__PURE__*/_jsx(\"input\",{name:\"rate\",type:\"range\",min:\"0.5\",max:\"2\",value:rate,step:\"0.1\",id:\"rate\",onChange:handleChange}),/*#__PURE__*/_jsx(\"div\",{className:\"rate-value\",children:rate}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pitch\",children:\"Pitch\"}),/*#__PURE__*/_jsx(\"input\",{name:\"pitch\",type:\"range\",min:\"0\",max:\"2\",value:pitch,step:\"0.1\",id:\"pitch\",onChange:handleChange}),/*#__PURE__*/_jsx(\"div\",{className:\"pitch-value\",children:pitch}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"})]}),/*#__PURE__*/_jsx(\"select\",{name:\"voice\",onChange:handleChange,children:voiceList.map(function(voice,index){return/*#__PURE__*/_jsx(\"option\",{value:index,children:voice.name},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"controls\",children:/*#__PURE__*/_jsx(\"button\",{id:\"play\",type:\"submit\",children:btnText})})]})]});};export default TextToSpeech;","map":{"version":3,"sources":["/home/kryo/Desktop/ReduxToolkit_TodoApp/src/Components/TextToSpeech.jsx"],"names":["useState","useEffect","synth","window","speechSynthesis","TextToSpeech","text","setText","pitch","setPitch","rate","setRate","voiceSelect","setVoiceSelect","voiceList","setVoiceList","btnText","setBtnText","handleChange","e","type","target","name","value","console","log","handleSubmit","event","preventDefault","speak","getVoices","voices","sort","a","b","aname","toUpperCase","bname","speaking","paused","resume","pause","utterThis","SpeechSynthesisUtterance","onend","onstart","onerror","error","voice","onvoiceschanged","undefined","map","index"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nvar synth = window.speechSynthesis;\r\n\r\nconst TextToSpeech = () => {\r\n  const [text, setText] = useState(\"\");\r\n  const [pitch, setPitch] = useState(1);\r\n  const [rate, setRate] = useState(1);\r\n  const [voiceSelect, setVoiceSelect] = useState(0);\r\n  const [voiceList, setVoiceList] = useState([]);\r\n  const [btnText, setBtnText] = useState(\"Play\");\r\n\r\n  const handleChange = (e) => {\r\n    const type = e.target.type;\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    if (type === \"textarea\") {\r\n      setText(value);\r\n    } else if (name === \"rate\") {\r\n      setRate(value);\r\n    } else if (name === \"pitch\") {\r\n      setPitch(value);\r\n    } else if (name === \"voice\") {\r\n      setVoiceSelect(value);\r\n    } else {\r\n      console.log(\"handleChange error type = \" + type);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = function (event) {\r\n    event.preventDefault();\r\n    speak();\r\n    // inputTxt.blur();\r\n  };\r\n\r\n  function getVoices() {\r\n    var voices = synth.getVoices().sort(function (a, b) {\r\n      const aname = a.name.toUpperCase(),\r\n        bname = b.name.toUpperCase();\r\n      if (aname < bname) return -1;\r\n      else if (aname === bname) return 0;\r\n      else return +1;\r\n    });\r\n    return voices;\r\n  }\r\n\r\n  function speak() {\r\n    if (synth.speaking) {\r\n      if (synth.paused) {\r\n        synth.resume();\r\n        setBtnText(\"Pause\");\r\n        console.log(\"resume\");\r\n      } else {\r\n        synth.pause();\r\n        setBtnText(\"Resume\");\r\n        console.log(\"pause\");\r\n      }\r\n    } else if (text !== \"\") {\r\n      var utterThis = new SpeechSynthesisUtterance(text);\r\n      console.log(utterThis);\r\n\r\n      //onboundary\r\n      //e.charIndex -> vi tri dau tien cua tu dang duoc doc\r\n\r\n      utterThis.onend = function (event) {\r\n        setBtnText(\"Play\");\r\n        console.log(\"SpeechSynthesisUtterance.onend\");\r\n      };\r\n      utterThis.onstart = function (event) {\r\n        setBtnText(\"Pause\");\r\n        console.log(\"SpeechSynthesisUtterance.onend\");\r\n      };\r\n      utterThis.onerror = function (event) {\r\n        console.error(\"SpeechSynthesisUtterance.onerror\");\r\n      };\r\n\r\n      if (voiceSelect >= 0) utterThis.voice = voiceList[voiceSelect];\r\n\r\n      utterThis.pitch = pitch;\r\n      utterThis.rate = rate;\r\n      synth.speak(utterThis);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let voices = getVoices();\r\n    setVoiceList([...voices]);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (speechSynthesis.onvoiceschanged !== undefined) {\r\n      speechSynthesis.onvoiceschanged = voiceSelect;\r\n    }\r\n  }, [voiceSelect]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Speech synthesiser</h1>\r\n\r\n      <p>\r\n        Enter some text in the input below and press return or the \"play\" button\r\n        to hear it. change voices using the dropdown menu.\r\n      </p>\r\n\r\n      <form className=\"inputForm\" onSubmit={handleSubmit}>\r\n        <textarea\r\n          type=\"text\"\r\n          className=\"txt\"\r\n          value={text}\r\n          onChange={handleChange}\r\n        ></textarea>\r\n        <div>\r\n          <label htmlFor=\"rate\">Rate</label>\r\n          <input\r\n            name=\"rate\"\r\n            type=\"range\"\r\n            min=\"0.5\"\r\n            max=\"2\"\r\n            value={rate}\r\n            step=\"0.1\"\r\n            id=\"rate\"\r\n            onChange={handleChange}\r\n          />\r\n          <div className=\"rate-value\">{rate}</div>\r\n          <div className=\"clearfix\"></div>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"pitch\">Pitch</label>\r\n          <input\r\n            name=\"pitch\"\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"2\"\r\n            value={pitch}\r\n            step=\"0.1\"\r\n            id=\"pitch\"\r\n            onChange={handleChange}\r\n          />\r\n          <div className=\"pitch-value\">{pitch}</div>\r\n          <div className=\"clearfix\"></div>\r\n        </div>\r\n        <select name=\"voice\" onChange={handleChange}>\r\n          {voiceList.map((voice, index) => {\r\n            return (\r\n              <option key={index} value={index}>\r\n                {voice.name}\r\n              </option>\r\n            );\r\n          })}\r\n        </select>\r\n        <div className=\"controls\">\r\n          <button id=\"play\" type=\"submit\">\r\n            {btnText}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextToSpeech;\r\n"]},"metadata":{},"sourceType":"module"}