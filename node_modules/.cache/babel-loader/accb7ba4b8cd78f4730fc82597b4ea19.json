{"ast":null,"code":"import _regeneratorRuntime from\"/home/kryo/Desktop/ReduxToolkit_TodoApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kryo/Desktop/ReduxToolkit_TodoApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice,createAsyncThunk,nanoid}from\"@reduxjs/toolkit\";import axios from\"axios\";var local=\"http://127.0.0.1:3001\";var heroku=\"https://hahunavth-rails-api.herokuapp.com\";var hostname=heroku;export var getTodo=createAsyncThunk(\"todos/todosFetched\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(hostname+\"/todos\");case 2:res=_context.sent;return _context.abrupt(\"return\",res.data);case 4:case\"end\":return _context.stop();}}},_callee);})));export var addTodo=createAsyncThunk(\"todos/todosAdded\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(title){var newTodo;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newTodo={id:nanoid(),title:title,completed:false};// await axios.get(\"https://jsonplaceholder.typicode.com/todos\", newTodo);\n_context2.next=3;return axios.post(hostname+\"/todos\",newTodo).then(function(res){console.log(\"add todo return : \");console.log(res);newTodo.id=res.data.id;});case 3:return _context2.abrupt(\"return\",newTodo);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());export var removeTodo=createAsyncThunk(\"todos/todosRemove\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var deleteTodo;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:deleteTodo={id:id};// await axios.get(\"https://jsonplaceholder.typicode.com/todos\", newTodo);\n_context3.next=3;return axios.delete(hostname+\"/todos/\"+id,deleteTodo);case 3:return _context3.abrupt(\"return\",{id:id});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}());var todosSlice=createSlice({name:\"todos\",initialState:{allTodos:[]},reducers:{addTodos:{reducer:function reducer(state,action){state.allTodos.unshift(action.payload);},prepare:function prepare(title){return{payload:{id:nanoid(),title:title,completed:false}};}},removeTodos:function removeTodos(state,action){var id=action.payload;state.allTodos=state.allTodos.filter(function(todo){return todo.id!==id;});},markComplete:function markComplete(state,action){var id=action.payload;state.allTodos=state.allTodos.map(function(todo){if(todo.id===id){todo.completed=!todo.completed;}return todo;});}},extraReducers:{// Get all todos\n[getTodo.pending]:function(state,action){console.log(\"Fetching todos from backend ....\");},[getTodo.fulfilled]:function(state,action){console.log(\"Done\");state.allTodos=action.payload;},[addTodo.pending]:function(state,action){console.log(\"try add todo\");},[addTodo.fulfilled]:function(state,action){var title=action.payload;var id=action.payload.id;state.allTodos.unshift(title);},[removeTodo.pending]:function(state,action){console.log(\"try delete todo\");},[removeTodo.fulfilled]:function(state,action){var id=action.payload.id;state.allTodos=state.allTodos.filter(function(todo){return todo.id!==id;});}}});//Export selector\nexport var todosSelector=function todosSelector(state){return state.allTodos;};//Export action\nvar _todosSlice$actions=todosSlice.actions,addTodos=_todosSlice$actions.addTodos,removeTodos=_todosSlice$actions.removeTodos,markComplete=_todosSlice$actions.markComplete;//Export reducer\nexport{addTodos,removeTodos,markComplete};export default todosSlice.reducer;","map":{"version":3,"sources":["/home/kryo/Desktop/ReduxToolkit_TodoApp/src/Store/Reducer/todoSlice.js"],"names":["createSlice","createAsyncThunk","nanoid","axios","local","heroku","hostname","getTodo","get","res","data","addTodo","title","newTodo","id","completed","post","then","console","log","removeTodo","deleteTodo","delete","todosSlice","name","initialState","allTodos","reducers","addTodos","reducer","state","action","unshift","payload","prepare","removeTodos","filter","todo","markComplete","map","extraReducers","pending","fulfilled","todosSelector","actions"],"mappings":"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","sourcesContent":["import { createSlice, createAsyncThunk, nanoid } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst local = \"http://127.0.0.1:3001\";\r\nconst heroku = \"https://hahunavth-rails-api.herokuapp.com\";\r\nconst hostname = heroku;\r\n\r\nexport const getTodo = createAsyncThunk(\"todos/todosFetched\", async () => {\r\n  // const res = await axios.get(\r\n  //   \"https://jsonplaceholder.typicode.com/todos?_limit=5\"\r\n  // );\r\n  const res = await axios.get(hostname + \"/todos\");\r\n  return res.data;\r\n});\r\n\r\nexport const addTodo = createAsyncThunk(\"todos/todosAdded\", async (title) => {\r\n  const newTodo = {\r\n    id: nanoid(),\r\n    title: title,\r\n    completed: false,\r\n  };\r\n  // await axios.get(\"https://jsonplaceholder.typicode.com/todos\", newTodo);\r\n  await axios.post(hostname + \"/todos\", newTodo).then((res) => {\r\n    console.log(\"add todo return : \");\r\n    console.log(res);\r\n    newTodo.id = res.data.id;\r\n  });\r\n  return newTodo;\r\n});\r\n\r\nexport const removeTodo = createAsyncThunk(\"todos/todosRemove\", async (id) => {\r\n  const deleteTodo = {\r\n    id: id,\r\n  };\r\n  // await axios.get(\"https://jsonplaceholder.typicode.com/todos\", newTodo);\r\n  await axios.delete(hostname + \"/todos/\" + id, deleteTodo);\r\n\r\n  return { id };\r\n});\r\n\r\nconst todosSlice = createSlice({\r\n  name: \"todos\",\r\n  initialState: {\r\n    allTodos: [],\r\n  },\r\n  reducers: {\r\n    addTodos: {\r\n      reducer: (state, action) => {\r\n        state.allTodos.unshift(action.payload);\r\n      },\r\n      prepare: (title) => {\r\n        return {\r\n          payload: { id: nanoid(), title: title, completed: false },\r\n        };\r\n      },\r\n    },\r\n    removeTodos: (state, action) => {\r\n      const id = action.payload;\r\n      state.allTodos = state.allTodos.filter((todo) => {\r\n        return todo.id !== id;\r\n      });\r\n    },\r\n    markComplete: (state, action) => {\r\n      const id = action.payload;\r\n      state.allTodos = state.allTodos.map((todo) => {\r\n        if (todo.id === id) {\r\n          todo.completed = !todo.completed;\r\n        }\r\n        return todo;\r\n      });\r\n    },\r\n  },\r\n  extraReducers: {\r\n    // Get all todos\r\n    [getTodo.pending]: (state, action) => {\r\n      console.log(\"Fetching todos from backend ....\");\r\n    },\r\n    [getTodo.fulfilled]: (state, action) => {\r\n      console.log(\"Done\");\r\n      state.allTodos = action.payload;\r\n    },\r\n    [addTodo.pending]: (state, action) => {\r\n      console.log(\"try add todo\");\r\n    },\r\n    [addTodo.fulfilled]: (state, action) => {\r\n      const title = action.payload;\r\n      const id = action.payload.id;\r\n      state.allTodos.unshift(title);\r\n    },\r\n    [removeTodo.pending]: (state, action) => {\r\n      console.log(\"try delete todo\");\r\n    },\r\n    [removeTodo.fulfilled]: (state, action) => {\r\n      const id = action.payload.id;\r\n      state.allTodos = state.allTodos.filter((todo) => {\r\n        return todo.id !== id;\r\n      });\r\n    },\r\n  },\r\n});\r\n\r\n//Export selector\r\nexport const todosSelector = (state) => state.allTodos;\r\n//Export action\r\nexport const { addTodos, removeTodos, markComplete } = todosSlice.actions;\r\n//Export reducer\r\nexport default todosSlice.reducer;\r\n"]},"metadata":{},"sourceType":"module"}